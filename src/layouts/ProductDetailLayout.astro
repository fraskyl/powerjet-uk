---
import "../styles/global.css";
import Footer from "../components/Layout/Footer.astro";
import Header from "../components/Layout/Header.astro";
import TextBlock from "../components/Content/TextBlock.astro";
import SectionTitle from "../components/Content/SectionTitle.astro";
import ContactBlock from "../components/Sections/ContactBlock.astro";
import Card from "../components/UI/Card.astro";
import Button from "../components/UI/Button.astro";
import BulletList from "../components/Content/BulletList.astro";
import SpecList from "../components/Content/SpecList.astro";
import PerformanceTable from "../components/Content/PerformanceTable.astro";
import BaseLayout from "./BaseLayout.astro";

interface Props {
	title: string;
    product: {
        // Basic Information
        title: string;
        slug: string;
        lede?: string;
        description?: any;
        mainImageUrl: string;
        mainImageAlt: string;
        
        // Categorization
        availability?: string[];
        productType?: {
            title: string;
            slug: string;
        };
        
        // Performance Table (Optional)
        hasPerformanceTable?: boolean;
        performanceSpecs?: Array<{
            model?: string;
            plungerSize?: string;
            psi?: string;
            bar?: string;
            lpm?: string;
            gpm?: string;
            kw?: string;
            hp?: string;
        }>;
        
        // Physical Specs (Optional)
        hasPhysicalSpecs?: boolean;
        physicalSpecs?: {
            dimensions?: string;
            weight?: string;
        };
        
        // Engine Specs (Optional)
        hasEngineSpecs?: boolean;
        engineSpecs?: {
            manufacturer?: string;
            model?: string;
            fuelType?: string;
            fuelCapacity?: string;
            power?: string;
        };
        
        // Build Options (Optional)
        hasBuildOptions?: boolean;
        buildOptions?: Array<{
            code?: string;
            description?: string;
        }>;
        
        // Key Specs (Always Available)
        keySpecs?: Array<{
            label: string;
            value: string;
        }>;
        
        // Additional
        dataSheetUrl?: string;
        featured?: boolean;
        order?: number;
        
        // Related Products (Optional)
        relatedProducts?: Array<{
            title: string;
            slug: string;
            imageUrl: string;
            imageAlt: string;
        }>;
    };
}

const { title } = Astro.props;

// Hard-coded test data
const testPerformanceTable = {
    headers: [
        "Model",
        "Plunger Size",
        "PSI",
        "BAR",
        "L/PM",
        "G/PM",
        "kW",
        "HP"
    ],
    rows: [
        {
            cells: ["3015", "10", "15,000", "1034", "77", "17.1", "149", "200"]
        },
        {
            cells: ["3020", "9", "20,000", "1378", "55", "12.4", "149", "200"]
        },
        {
            cells: ["3040", "7", "40,000", "2758", "23", "5.1", "149", "200"]
        }
    ]
};
---

<BaseLayout>
    <Header />
    <body>
        <div class="page-grid">
            <div class="link__prev-page-wrapper">
                <a href="/rentals">
                    <div class="link__prev-page">
                        <span class="material-symbols-outlined">arrow_back</span
                        >
                        <p>Back to all products</p>
                    </div>
                </a>
            </div>

            <div class="section__product-detail-wrapper">
                <div class="section__product-detail-info">
                    <SectionTitle
                        headline="Surface Preparation"
                        headingSize="large"
                    />
                    <TextBlock
                        bodyCopy="High-pressure and ultra high-pressure water jetting effectively prepares and clean surfaces, removing coatings, rust, and other stubborn residues."
                        fontSize="lede"
                    />
                    <TextBlock
                        bodyCopy="This method thoroughly cleans without causing damage or compromising the surface’s structural integrity. Powerjet offer automated solutions for increased productivity and safety. "
                        fontSize="regular"
                    />
                    <div class="section__product-cta-buttons">
                         <Button variant="tertiary" href="/contact"
                        >Download Datasheet</Button
                    >
                    <Button variant="primary" href="/contact"
                        >Request a Quote</Button
                    >
                    </div>   
                </div>
                <div class="section__product-detail-image">
                    <img
                        src="/src/assets/New_Image_Magtrack-lrg.jpeg"
                        alt="MagTrack unit removing paint from the side of a ship's hull"
                    />
                </div>
            </div>

            <div class="divider__border"></div>

        
            <!-- Performance Table Section with test data -->
            <section class="section__product-performance-table">
                <div class="section__product-performance-table-title">
                    <SectionTitle
                        headline="Performance Specifications"
                        headingSize="small"
                    />
                </div>
                <div class="section__product-performance-table-content">
                    <PerformanceTable
                        headers={testPerformanceTable.headers}
                        rows={testPerformanceTable.rows}
                    />
                </div>
            </section>
            </section>

            <section class="section__product-detail-additional-specs-wrapper">
                <div class="section__product-detail-physical-specs">
                    <div class="divider__border"></div>
                    <div class="section__product-detail-physical-specs-title">
                        <SectionTitle
                            headline="Physical Characteristics"
                            headingSize="small"
                        />
                    </div>

                    <div class="section__product-detail-physical-specs-content">
                        <SpecList>
                            <span slot="title">Dimensions (mm)</span>
                            <span slot="data">W 2067 x L 4789 x H 2200</span>
                        </SpecList>
                        <SpecList>
                            <span slot="title">Weight (Dry)</span>
                            <span slot="data">3080kg</span>
                        </SpecList>
                    </div>
                </div>

                <div class="section__product-detail-engine-specs">
                    <div class="divider__border"></div>
                    <div class="section__product-detail-engine-specs-title">
                        <SectionTitle
                            headline="Engine Data"
                            headingSize="small"
                        />
                    </div>

                    <div class="section__product-detail-engine-specs-content">
                        <SpecList>
                            <span slot="title">Dimensions (mm)</span>
                            <span slot="data">W 2067 x L 4789 x H 2200</span>
                        </SpecList>
                        <SpecList>
                            <span slot="title">Weight (Dry)</span>
                            <span slot="data">3080kg</span>
                        </SpecList>
                    </div>
                </div>
            </section>

            <div class="divider__border"></div>


            <section class="section__product-detail-build-options">
                <div class="section__product-detail-build-options-title">
                    <SectionTitle
                        headline="Build Options"
                        headingSize="small"
                    />
                </div>
                <div class="section__product-detail-build-options-content">
                    <BulletList>
                        <span slot="title">D3200-SM</span>
                        <span slot="item1"
                            >Bolt-On Skid-Frame with Sound Attenuated Enclosure</span
                        >
                    </BulletList>
                </div>
            </section>

            <div class="divider__border"></div>

            <section class="section__product-detail-related-products">
                <div class="section__product-detail-related-products-title">
                    <SectionTitle
                        headline="Related Products"
                        headingSize="small"
                    />
                </div>
                <div class="section__product-detail-related-products-cards">
                    <Card
                        imageURL="/src/assets/New_Image_Magtrack-lrg.jpeg"
                        imageAlt="MagTrack unit removing paint from the side of a ship's hull"
                        href="/application-detail"
                        buttonLabel="Surface Preparation"
                        icon={true}
                        style="light"
                    />
                    <Card
                        imageURL="/src/assets/New_Image_Magtrack-lrg.jpeg"
                        imageAlt="MagTrack unit removing paint from the side of a ship's hull"
                        href="/sales"
                        buttonLabel="Sales"
                        icon={true}
                        style="light"
                    />
                    <Card
                        imageURL="/src/assets/New_Image_Magtrack-lrg.jpeg"
                        imageAlt="MagTrack unit removing paint from the side of a ship's hull"
                        href="/sales"
                        buttonLabel="Sales"
                        icon={true}
                        style="light"
                    />
                </div>
            </section>

            <ContactBlock />
        </div>
    </body>

    <Footer />
</BaseLayout>
    <style>
        .link__prev-page-wrapper {
            grid-column: 2 / -2; /* ✅ Added: Position in grid */
            display: flex;
            margin-bottom: 3rem;
            margin-top: 3rem;
        }

        .link__prev-page-wrapper a {
            text-decoration: none;
            color: var(--pj_brand_blue);
        }

        .link__prev-page {
            display: flex;
            flex-direction: row;
            align-items: center;
            gap: 0.5rem;
        }

        .section__product-detail-wrapper {
            grid-column: 2 / -2; /* Span the content columns of page grid */
            display: flex;
            flex-direction: column;
            flex-flow: column-reverse;
            margin-bottom: 3rem;
            gap: 1rem;
        }

        .section__product-detail-info {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .section__product-cta-buttons{  
            display: flex;
            flex-direction: column;
            gap: 1rem;
            margin-top: 1.5rem;
         }

        .section__product-detail-image {
            display: flex;
            margin-bottom: 1rem;
        }

        .section__product-detail-image img {
            display: block;
            width: 100%;
            height: auto;
            grid-column: 2 / 1;
            border-radius: 0.25rem;
            max-height: 400px;
            object-fit: cover;
        }

        .section__product-performance-table {
            display: flex;
            flex-direction: column;
            grid-column: 2 / -2;
            margin-bottom: 5rem;
        }

        .section__product-detail-additional-specs-wrapper {
            display: grid;
            grid-template-columns: 1fr; /* Single column on mobile */
            grid-column: 2 / -2;
            gap: 6rem;
            margin-bottom: 5rem;
        }

        .section__product-detail-physical-specs,
        .section__product-detail-engine-specs {
            display: flex;
            flex-direction: column;
        }

        .section__product-detail-physical-specs-content,
        .section__product-detail-engine-specs-content {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .section__product-detail-related-products {
            display: flex;
            flex-direction: column;
            grid-column: 2 / -2;
            margin-bottom: 7.75rem;
        }

        .section__product-detail-build-options {
            display: grid;
            grid-column: 2 / -2;
            margin-bottom: 6rem;
        }

        .section__applications-recommended-products-cards {
            display: grid;
            gap: 1.5rem;
            grid-column: 2 / -2;
        }

        .divider__border {
            margin-bottom: 1rem;
            height: 100%;
        }

        @media screen and (min-width: 768px) {
            .link__prev-page-wrapper {
                display: flex;
                height: 100%;
                margin-bottom: 3rem;
                margin-top: 3rem;
                grid-column: 2 / -2;
            }

            .divider__border {
                grid-column: 2 /-2;
            }

            .section__product-detail-wrapper {
                display: flex;
                flex-direction: column;
                flex-flow: column-reverse;
                grid-column: 2 / -2;
                margin-bottom: 8rem;
            }

            .section__applications-details {
                display: flex;
                flex: 1;
            }

            .section__applications-image {
                display: flex;
                flex: 1;
            }

            .section__product-performance-table{
                display: grid;
                grid-column: 2 / -2;
                margin-bottom: 6rem;
            }

            .section__product-detail-additional-specs-wrapper {
                grid-column: 2 / -2;
                grid-template-columns: 1fr 1fr; /* Two equal columns */
                gap: 6rem;
            }

            .section__product-detail-build-options {
            display: grid;
            grid-column: 2 / -2;
            
        }

            .section__applications-recommended-products {
                display: grid;
                grid-template-columns: 1fr;
                grid-column: 2 / -2;
                margin-bottom: 6rem;
                gap: 1rem;
            }

            .section__product-detail-related-products-cards {
                display: grid;
                grid-template-columns: repeat(
                    3,
                    1fr
                ); /* Tablet/Desktop: 3 columns */
                gap: 1.5rem;
                grid-column: 2 / -2;
                margin-bottom: 4rem;
            }
        }
        @media screen and (min-width: 1024px) {
            .link__prev-page-wrapper {
                grid-column: 3 / -3;
                margin-bottom: 5rem;
            }

            .section__product-detail-wrapper {
                display: flex;
                flex-direction: row;
                grid-column: 3 / -3;
                gap: 4rem;
            }

            .divider__border {
                grid-column: 3 /-3;
            }

            .section__product-performance-table{
                display: grid;
                grid-column: 3 / -3;
            }

            .section__product-detail-related-products {
                display: grid;
                grid-column: 3 / -3;
            }

            .section__product-detail-additional-specs-wrapper {
                grid-template-columns: 1fr 1fr; /* Two equal columns */
                grid-column: 3 / -3;
                gap: 8rem;
                margin-bottom: 6rem;
            }

            .section__product-detail-build-options {
            display: grid;
            grid-column: 3 / -3;
            
        }
        }
    </style>


</html>
