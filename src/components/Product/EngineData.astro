---
/**
 * EngineData.astro
 * 
 * Displays engine specifications in a clean card/list format.
 * 
 * Props:
 *   - engineData: Object with manufacturer, model, ratings, emissionCompliancy, fuelConsumption, adblueConsumption
 * 
 * Example usage:
 *   {hasEngineData && engineData && (
 *     <EngineData engineData={engineData} />
 *   )}
 */

interface EngineDataProps {
  manufacturer?: string;
  model?: string;
  ratings?: string;
  emissionCompliancy?: string;
  fuelConsumption?: string;
  adblueConsumption?: string;
}

interface Props {
  engineData: EngineDataProps;
}

const { engineData } = Astro.props;

// Handle empty or missing data gracefully
if (!engineData) {
  return null;
}

// Filter out empty fields so we only display what we have
const dataEntries = Object.entries(engineData)
  .filter(([_, value]) => value)
  .map(([key, value]) => ({
    key,
    value,
    label: formatLabel(key)
  }));

function formatLabel(key: string): string {
  const labels: Record<string, string> = {
    manufacturer: 'Engine Manufacturer',
    model: 'Engine Model',
    ratings: 'Power Ratings',
    emissionCompliancy: 'Emission Compliance',
    fuelConsumption: 'Fuel Consumption',
    adblueConsumption: 'AdBlue Consumption'
  };
  return labels[key] || key;
}
---

<section class="engine-data__container">
  <h2>Engine Specifications</h2>
  
  <div class="engine-data__grid">
    {dataEntries.map(({ label, value }) => (
      <div class="engine-data__item">
        <dt class="engine-data__label">{label}</dt>
        <dd class="engine-data__value">{value}</dd>
      </div>
    ))}
  </div>
</section>

<style>
  .engine-data__container {
    grid-column: 2 / -2;
  }

  .engine-data__container h2 {
    font-size: 1.5rem;
    font-weight: 450;
    color: var(--pj_blue_80);
    margin-bottom: 2rem;
  }

  .engine-data__grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 1rem;
  }

  .engine-data__item {
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    align-items: center;
  }

  .engine-data__label {
    font-size: 0.875rem;
    font-weight: 400;
    letter-spacing: 0.5px;
    color: var(--pj_blue_70);
    margin: 0;
  }

  .engine-data__value {
    font-size: 0.875rem;
    color: var(--pj_blue_80);
    font-weight: 400;
    margin: 0;
  }

  @media screen and (max-width: 768px) {
    .engine-data__container {
      grid-column: 1 / -1;
      padding: 0 1rem;
      margin: 2rem 0;
    }

    .engine-data__grid {
      grid-template-columns: 1fr;
      gap: 1rem;
    }

  }
</style>
