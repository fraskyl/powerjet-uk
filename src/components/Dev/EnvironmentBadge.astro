---
const dataset = import.meta.env.PUBLIC_SANITY_DATASET || "unknown";
const appEnv = import.meta.env.PUBLIC_APP_ENV || "unknown";
const isProd = import.meta.env.PROD; // Build optimization flag

let label = "";
let icon = "";
let color = "";

if (appEnv === "local") {
  label = "LOCAL DEV";
  icon = "ðŸ’»";
  color = "#007AFF";
} else if (appEnv === "staging") {
  label = "STAGING";
  icon = "ðŸ§ª";
  color = "#FF9500";
} else if (appEnv === "production") {
  label = "PRODUCTION";
  icon = "ðŸš€";
  color = "#34C759";
}

// Only show badge in non-production environments
const showBadge = appEnv !== "production";
---

{
  showBadge && (
    <div class="env-badge" style={`background: ${color};`}>
      {icon} {label}
      <div class="details">
        Dataset: {dataset} | Build: {isProd ? "Optimized" : "Dev"}
      </div>
    </div>
  )
}
