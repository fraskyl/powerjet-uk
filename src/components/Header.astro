---
import Navigation from "../components/Navigation.astro";
---

<link
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined"
    rel="stylesheet"
/>

<header class="header__wrapper">
    <div class="header__logo">
        <a href="/"> <img src="/src/assets/POWERJET HPWJS_Logo-white.svg" /></a>
    </div>

    <nav class="header__nav">
        <!-- Hamburger button (mobile only) -->
        <button class="header__mobile-hamburger" aria-label="Toggle menu">
            <span></span>
            <span></span>
            <span></span>
        </button>

        <!-- Mobile menu overlay -->
        <div class="header__mobile-menu">
            <Navigation />
            <div class="header__cta-mobile">
                <a href="/contact" class="header__cta-link">
                    <span>Get in touch</span>
                    <span class="cta-divider"></span>
                    <span class="material-symbols-outlined">arrow_forward</span>
                </a>
            </div>
        </div>

        <!-- Desktop navigation -->
        <div class="header__desktop-nav">
            <Navigation />
        </div>
    </nav>

    <div class="header__cta">
        <a href="/contact" class="header__cta-link">
            <span>Get in touch</span>
            <span class="cta-divider"></span>
            <span class="material-symbols-outlined">arrow_forward</span>
        </a>
    </div>
</header>

<style>
    /* header styles */

    /* hide desktop nav on mobile */
    .header__desktop-nav {
        display: none;
    }

    .header__wrapper {
        display: flex;
        justify-content: space-between;
        align-items: center;
        background-color: var(--pj_brand_blue);
        box-shadow: inset 0 -1px 0 var(--pj_grey_10);

        padding-left: 1rem;
    }

    .header__logo {
        height: auto;
        z-index: 1001; /* Above menu */
    }

    .header__logo img {
        height: 56px;
    }

    .header__nav {
        position: relative;
        padding: 2rem;
    }

    .header__cta {
        display: none;
    }

    .header__cta-mobile {
        display: flex;
        align-items: stretch; /* Let link fill height */
        align-self: stretch;
        background-color: var(--pj_blue_90);
        transition: background-color 0.3s ease;

        border-radius: 0.25rem;
    }

    .header__cta-link {
        display: flex;
        align-items: center;
        gap: 1rem;
        padding: 1.5rem;
        color: var(--pj_blue_05);
        text-decoration: none;
        font-weight: 400;
        font-size: 2rem;
        flex: 1; /* Fill container */
    }

    .cta-divider {
        width: 1px;
        height: 100%;
        background-color: var(--pj_blue_10);
    }

    .header__cta .material-symbols-outlined {
        color: var(--pj_blue_10);
    }

    .material-symbols-outlined {

        color: inherit;
        font-size: 2rem;
    }

    .header__mobile-hamburger {
        display: flex;
        flex-direction: column;
        gap: 4px;
        background: transparent;
        border: none;
        cursor: pointer;
        padding: 8px;
        z-index: 1001; /* Above menu */
        position: relative;
    }

    .header__mobile-hamburger span {
        display: block;
        width: 24px;
        height: 2px;
        background-color: white;
        transition: all 0.3s;
    }

    /* Hamburger animation when active */
    .header__mobile-hamburger.active span:nth-child(1) {
        transform: rotate(45deg) translate(4px, 5px);
    }

    .header__mobile-hamburger.active span:nth-child(2) {
        opacity: 0;
    }

    .header__mobile-hamburger.active span:nth-child(3) {
        transform: rotate(-45deg) translate(4px, -5px);
    }

    /* Mobile menu overlay - hidden by default */
    .header__mobile-menu {
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        background-color: var(--pj_brand_blue);

        /* Hidden by default */
        transform: translateY(100%);
        transition: transform 0.3s ease;

        /* Content positioning */
        display: flex;
        flex-direction: column;
        cursor: pointer;
        padding: 2rem;
        z-index: 1000;

        justify-content: space-between;
    }

    /* Show menu when active */
    .header__mobile-menu.active {
        transform: translateY(0);
    }

    .header__mobile-menu :global(.nav__links) {
        display: flex;
        flex-direction: column;
        gap: 2rem;
        margin-top: 8rem;
        z-index: 1003;
    }

    .header__mobile-menu :global(.nav__links ul) {
        flex-direction: column;
        gap: 2.4rem;
    }

    .header__mobile-menu :global(.nav__links a) {
        font-size: 3rem;
        font-weight: 500;

        color: var(--pj_blue_10);
        gap: 2rem;

        border-bottom: solid 1px var(--pj_blue_10);
        padding-bottom: 0.75rem;
    }

    @media screen and (min-width: 768px) {
        .header__wrapper {
            display: flex;
            flex-direction: row;
            align-items: center;
        }
        .header__desktop-nav {
            display: block;
        }

        .header__mobile-hamburger,
        .header__mobile-menu {
            display: none;
        }

        .header__cta {
            display: flex;
            align-items: stretch; /* Let link fill height */
            align-self: stretch;
            background-color: var(--pj_blue_90);
            transition: background-color 0.3s ease;

            border-bottom: solid 1px var(--pj_blue_05);
        }

        .header__cta-link {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 0 1.5rem;
            color: white;
            text-decoration: none;
            font-weight: 500;
            font-size: 1rem;
            flex: 1; /* Fill container */
        }

        .header__cta:hover {
            background-color: var(--pj_blue_70);
        }

         .material-symbols-outlined {
        font-variation-settings:
            "FILL" 0,
            "wght" 400,
            "GRAD" 0,
            "opsz" 24;
        color: currentColor; /* Inherits from .card__panel */
    }

    }
</style>

<script>
    function toggleMenu() {
        const mobileMenu = document.querySelector(".header__mobile-menu");
        const hamburger = document.querySelector(".header__mobile-hamburger");

        mobileMenu?.classList.toggle("active");
        hamburger?.classList.toggle("active");

        // Prevent body scroll when menu is open
        document.body.style.overflow = mobileMenu?.classList.contains("active")
            ? "hidden"
            : "";
    }

    // Attach event listener after DOM is loaded
    document.addEventListener("DOMContentLoaded", () => {
        const hamburger = document.querySelector(".header__mobile-hamburger");
        hamburger?.addEventListener("click", toggleMenu);

        // Close menu when clicking nav links
        const navLinks = document.querySelectorAll(".header__mobile-menu a");
        navLinks.forEach((link) => {
            link.addEventListener("click", () => {
                toggleMenu();
            });
        });
    });
</script>
